{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../hooks/useAuth';import{FirestoreService}from'../services/firestoreService';import{RequestStatus,UserRole}from'../types';import{formatCurrency,formatDateShort}from'../utils/formatters';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const RequestsList=_ref=>{let{onNewRequest,onViewRequest}=_ref;const{currentUser,signOut}=useAuth();const[requests,setRequests]=useState([]);const[filteredRequests,setFilteredRequests]=useState([]);const[selectedFilter,setSelectedFilter]=useState(null);const[isLoading,setIsLoading]=useState(true);useEffect(()=>{if(!currentUser)return;setIsLoading(true);// Set up real-time listener\nconst unsubscribe=FirestoreService.subscribeToRequests(updatedRequests=>{setRequests(updatedRequests);setIsLoading(false);},currentUser.role===UserRole.GUEST?currentUser.id:undefined);return()=>unsubscribe();},[currentUser]);useEffect(()=>{// Apply filter when requests or selectedFilter changes\nif(selectedFilter){setFilteredRequests(requests.filter(req=>req.status===selectedFilter));}else{setFilteredRequests(requests);}},[requests,selectedFilter]);const handleFilterChange=filter=>{setSelectedFilter(filter);};const getNavigationTitle=()=>{return(currentUser===null||currentUser===void 0?void 0:currentUser.role)===UserRole.OWNER?'All Requests':'My Requests';};if(isLoading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading requests...\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header-title\",children:getNavigationTitle()}),/*#__PURE__*/_jsxs(\"div\",{className:\"header-actions\",children:[(currentUser===null||currentUser===void 0?void 0:currentUser.role)===UserRole.GUEST&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-add\",onClick:onNewRequest,title:\"New Request\",children:\"+\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:signOut,children:\"Sign Out\"})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[(currentUser===null||currentUser===void 0?void 0:currentUser.role)===UserRole.OWNER&&/*#__PURE__*/_jsxs(\"div\",{className:\"filter-chips\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"filter-chip \".concat(selectedFilter===null?'active':''),onClick:()=>handleFilterChange(null),children:\"All\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-chip \".concat(selectedFilter===RequestStatus.PENDING?'active':''),onClick:()=>handleFilterChange(RequestStatus.PENDING),children:\"Pending\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filter-chip \".concat(selectedFilter===RequestStatus.APPROVED?'active':''),onClick:()=>handleFilterChange(RequestStatus.APPROVED),children:\"Approved\"})]}),filteredRequests.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"empty-state\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"empty-state-icon\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"No requests found\"}),(currentUser===null||currentUser===void 0?void 0:currentUser.role)===UserRole.GUEST&&/*#__PURE__*/_jsx(\"p\",{children:\"Tap the + button to create your first reimbursement request\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"requests-list\",children:filteredRequests.map(request=>/*#__PURE__*/_jsx(\"div\",{className:\"request-card\",onClick:()=>onViewRequest(request),children:/*#__PURE__*/_jsxs(\"div\",{className:\"request-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"request-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:request.description}),(currentUser===null||currentUser===void 0?void 0:currentUser.role)===UserRole.OWNER&&/*#__PURE__*/_jsxs(\"div\",{className:\"request-meta\",children:[\"User ID: \",request.userId]}),/*#__PURE__*/_jsx(\"div\",{className:\"request-meta\",children:formatDateShort(request.createdAt)})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"request-amount\",children:formatCurrency(request.amount)}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge \".concat(request.status===RequestStatus.PENDING?'status-pending':'status-approved'),children:request.status===RequestStatus.PENDING?'Pending':'Approved'})]})]})},request.id))})]})]});};export default RequestsList;","map":{"version":3,"names":["React","useState","useEffect","useAuth","FirestoreService","RequestStatus","UserRole","formatCurrency","formatDateShort","jsx","_jsx","jsxs","_jsxs","RequestsList","_ref","onNewRequest","onViewRequest","currentUser","signOut","requests","setRequests","filteredRequests","setFilteredRequests","selectedFilter","setSelectedFilter","isLoading","setIsLoading","unsubscribe","subscribeToRequests","updatedRequests","role","GUEST","id","undefined","filter","req","status","handleFilterChange","getNavigationTitle","OWNER","className","children","onClick","title","concat","PENDING","APPROVED","length","map","request","description","userId","createdAt","amount"],"sources":["/Users/carl/Documents/Personal/CS Projects/Beta Treasurer App/BetaMoney/src/components/RequestsList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { FirestoreService } from '../services/firestoreService';\nimport { ReimbursementRequest, RequestStatus, UserRole } from '../types';\nimport { formatCurrency, formatDateShort } from '../utils/formatters';\n\ninterface RequestsListProps {\n  onNewRequest: () => void;\n  onViewRequest: (request: ReimbursementRequest) => void;\n}\n\nconst RequestsList: React.FC<RequestsListProps> = ({ onNewRequest, onViewRequest }) => {\n  const { currentUser, signOut } = useAuth();\n  const [requests, setRequests] = useState<ReimbursementRequest[]>([]);\n  const [filteredRequests, setFilteredRequests] = useState<ReimbursementRequest[]>([]);\n  const [selectedFilter, setSelectedFilter] = useState<RequestStatus | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  useEffect(() => {\n    if (!currentUser) return;\n\n    setIsLoading(true);\n\n    // Set up real-time listener\n    const unsubscribe = FirestoreService.subscribeToRequests(\n      (updatedRequests) => {\n        setRequests(updatedRequests);\n        setIsLoading(false);\n      },\n      currentUser.role === UserRole.GUEST ? currentUser.id : undefined\n    );\n\n    return () => unsubscribe();\n  }, [currentUser]);\n\n  useEffect(() => {\n    // Apply filter when requests or selectedFilter changes\n    if (selectedFilter) {\n      setFilteredRequests(requests.filter(req => req.status === selectedFilter));\n    } else {\n      setFilteredRequests(requests);\n    }\n  }, [requests, selectedFilter]);\n\n  const handleFilterChange = (filter: RequestStatus | null) => {\n    setSelectedFilter(filter);\n  };\n\n\n\n  const getNavigationTitle = () => {\n    return currentUser?.role === UserRole.OWNER ? 'All Requests' : 'My Requests';\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"spinner\" />\n        <p>Loading requests...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"app\">\n      <header className=\"header\">\n        <h1 className=\"header-title\">{getNavigationTitle()}</h1>\n        <div className=\"header-actions\">\n          {currentUser?.role === UserRole.GUEST && (\n            <button className=\"btn btn-add\" onClick={onNewRequest} title=\"New Request\">\n              +\n            </button>\n          )}\n          <button className=\"btn btn-danger\" onClick={signOut}>\n            Sign Out\n          </button>\n        </div>\n      </header>\n\n      <main className=\"main-content\">\n        {/* Filter chips for treasurer */}\n        {currentUser?.role === UserRole.OWNER && (\n          <div className=\"filter-chips\">\n            <button\n              className={`filter-chip ${selectedFilter === null ? 'active' : ''}`}\n              onClick={() => handleFilterChange(null)}\n            >\n              All\n            </button>\n            <button\n              className={`filter-chip ${selectedFilter === RequestStatus.PENDING ? 'active' : ''}`}\n              onClick={() => handleFilterChange(RequestStatus.PENDING)}\n            >\n              Pending\n            </button>\n            <button\n              className={`filter-chip ${selectedFilter === RequestStatus.APPROVED ? 'active' : ''}`}\n              onClick={() => handleFilterChange(RequestStatus.APPROVED)}\n            >\n              Approved\n            </button>\n          </div>\n        )}\n\n        {/* Requests list */}\n        {filteredRequests.length === 0 ? (\n          <div className=\"empty-state\">\n            <div className=\"empty-state-icon\">ðŸ“„</div>\n            <h3>No requests found</h3>\n            {currentUser?.role === UserRole.GUEST && (\n              <p>Tap the + button to create your first reimbursement request</p>\n            )}\n          </div>\n        ) : (\n          <div className=\"requests-list\">\n            {filteredRequests.map((request) => (\n              <div\n                key={request.id}\n                className=\"request-card\"\n                onClick={() => onViewRequest(request)}\n              >\n                <div className=\"request-header\">\n                  <div className=\"request-info\">\n                    <h3>{request.description}</h3>\n                    {currentUser?.role === UserRole.OWNER && (\n                      <div className=\"request-meta\">User ID: {request.userId}</div>\n                    )}\n                    <div className=\"request-meta\">{formatDateShort(request.createdAt)}</div>\n                  </div>\n                  <div>\n                    <div className=\"request-amount\">{formatCurrency(request.amount)}</div>\n                    <span\n                      className={`status-badge ${\n                        request.status === RequestStatus.PENDING ? 'status-pending' : 'status-approved'\n                      }`}\n                    >\n                      {request.status === RequestStatus.PENDING ? 'Pending' : 'Approved'}\n                    </span>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n    </div>\n  );\n};\n\nexport default RequestsList; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,OAAO,KAAQ,kBAAkB,CAC1C,OAASC,gBAAgB,KAAQ,8BAA8B,CAC/D,OAA+BC,aAAa,CAAEC,QAAQ,KAAQ,UAAU,CACxE,OAASC,cAAc,CAAEC,eAAe,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAOtE,KAAM,CAAAC,YAAyC,CAAGC,IAAA,EAAqC,IAApC,CAAEC,YAAY,CAAEC,aAAc,CAAC,CAAAF,IAAA,CAChF,KAAM,CAAEG,WAAW,CAAEC,OAAQ,CAAC,CAAGf,OAAO,CAAC,CAAC,CAC1C,KAAM,CAACgB,QAAQ,CAAEC,WAAW,CAAC,CAAGnB,QAAQ,CAAyB,EAAE,CAAC,CACpE,KAAM,CAACoB,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGrB,QAAQ,CAAyB,EAAE,CAAC,CACpF,KAAM,CAACsB,cAAc,CAAEC,iBAAiB,CAAC,CAAGvB,QAAQ,CAAuB,IAAI,CAAC,CAChF,KAAM,CAACwB,SAAS,CAAEC,YAAY,CAAC,CAAGzB,QAAQ,CAAC,IAAI,CAAC,CAEhDC,SAAS,CAAC,IAAM,CACd,GAAI,CAACe,WAAW,CAAE,OAElBS,YAAY,CAAC,IAAI,CAAC,CAElB;AACA,KAAM,CAAAC,WAAW,CAAGvB,gBAAgB,CAACwB,mBAAmB,CACrDC,eAAe,EAAK,CACnBT,WAAW,CAACS,eAAe,CAAC,CAC5BH,YAAY,CAAC,KAAK,CAAC,CACrB,CAAC,CACDT,WAAW,CAACa,IAAI,GAAKxB,QAAQ,CAACyB,KAAK,CAAGd,WAAW,CAACe,EAAE,CAAGC,SACzD,CAAC,CAED,MAAO,IAAMN,WAAW,CAAC,CAAC,CAC5B,CAAC,CAAE,CAACV,WAAW,CAAC,CAAC,CAEjBf,SAAS,CAAC,IAAM,CACd;AACA,GAAIqB,cAAc,CAAE,CAClBD,mBAAmB,CAACH,QAAQ,CAACe,MAAM,CAACC,GAAG,EAAIA,GAAG,CAACC,MAAM,GAAKb,cAAc,CAAC,CAAC,CAC5E,CAAC,IAAM,CACLD,mBAAmB,CAACH,QAAQ,CAAC,CAC/B,CACF,CAAC,CAAE,CAACA,QAAQ,CAAEI,cAAc,CAAC,CAAC,CAE9B,KAAM,CAAAc,kBAAkB,CAAIH,MAA4B,EAAK,CAC3DV,iBAAiB,CAACU,MAAM,CAAC,CAC3B,CAAC,CAID,KAAM,CAAAI,kBAAkB,CAAGA,CAAA,GAAM,CAC/B,MAAO,CAAArB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEa,IAAI,IAAKxB,QAAQ,CAACiC,KAAK,CAAG,cAAc,CAAG,aAAa,CAC9E,CAAC,CAED,GAAId,SAAS,CAAE,CACb,mBACEb,KAAA,QAAK4B,SAAS,CAAC,mBAAmB,CAAAC,QAAA,eAChC/B,IAAA,QAAK8B,SAAS,CAAC,SAAS,CAAE,CAAC,cAC3B9B,IAAA,MAAA+B,QAAA,CAAG,qBAAmB,CAAG,CAAC,EACvB,CAAC,CAEV,CAEA,mBACE7B,KAAA,QAAK4B,SAAS,CAAC,KAAK,CAAAC,QAAA,eAClB7B,KAAA,WAAQ4B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACxB/B,IAAA,OAAI8B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEH,kBAAkB,CAAC,CAAC,CAAK,CAAC,cACxD1B,KAAA,QAAK4B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,EAC5B,CAAAxB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEa,IAAI,IAAKxB,QAAQ,CAACyB,KAAK,eACnCrB,IAAA,WAAQ8B,SAAS,CAAC,aAAa,CAACE,OAAO,CAAE3B,YAAa,CAAC4B,KAAK,CAAC,aAAa,CAAAF,QAAA,CAAC,GAE3E,CAAQ,CACT,cACD/B,IAAA,WAAQ8B,SAAS,CAAC,gBAAgB,CAACE,OAAO,CAAExB,OAAQ,CAAAuB,QAAA,CAAC,UAErD,CAAQ,CAAC,EACN,CAAC,EACA,CAAC,cAET7B,KAAA,SAAM4B,SAAS,CAAC,cAAc,CAAAC,QAAA,EAE3B,CAAAxB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEa,IAAI,IAAKxB,QAAQ,CAACiC,KAAK,eACnC3B,KAAA,QAAK4B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B/B,IAAA,WACE8B,SAAS,gBAAAI,MAAA,CAAiBrB,cAAc,GAAK,IAAI,CAAG,QAAQ,CAAG,EAAE,CAAG,CACpEmB,OAAO,CAAEA,CAAA,GAAML,kBAAkB,CAAC,IAAI,CAAE,CAAAI,QAAA,CACzC,KAED,CAAQ,CAAC,cACT/B,IAAA,WACE8B,SAAS,gBAAAI,MAAA,CAAiBrB,cAAc,GAAKlB,aAAa,CAACwC,OAAO,CAAG,QAAQ,CAAG,EAAE,CAAG,CACrFH,OAAO,CAAEA,CAAA,GAAML,kBAAkB,CAAChC,aAAa,CAACwC,OAAO,CAAE,CAAAJ,QAAA,CAC1D,SAED,CAAQ,CAAC,cACT/B,IAAA,WACE8B,SAAS,gBAAAI,MAAA,CAAiBrB,cAAc,GAAKlB,aAAa,CAACyC,QAAQ,CAAG,QAAQ,CAAG,EAAE,CAAG,CACtFJ,OAAO,CAAEA,CAAA,GAAML,kBAAkB,CAAChC,aAAa,CAACyC,QAAQ,CAAE,CAAAL,QAAA,CAC3D,UAED,CAAQ,CAAC,EACN,CACN,CAGApB,gBAAgB,CAAC0B,MAAM,GAAK,CAAC,cAC5BnC,KAAA,QAAK4B,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B/B,IAAA,QAAK8B,SAAS,CAAC,kBAAkB,CAAAC,QAAA,CAAC,cAAE,CAAK,CAAC,cAC1C/B,IAAA,OAAA+B,QAAA,CAAI,mBAAiB,CAAI,CAAC,CACzB,CAAAxB,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEa,IAAI,IAAKxB,QAAQ,CAACyB,KAAK,eACnCrB,IAAA,MAAA+B,QAAA,CAAG,6DAA2D,CAAG,CAClE,EACE,CAAC,cAEN/B,IAAA,QAAK8B,SAAS,CAAC,eAAe,CAAAC,QAAA,CAC3BpB,gBAAgB,CAAC2B,GAAG,CAAEC,OAAO,eAC5BvC,IAAA,QAEE8B,SAAS,CAAC,cAAc,CACxBE,OAAO,CAAEA,CAAA,GAAM1B,aAAa,CAACiC,OAAO,CAAE,CAAAR,QAAA,cAEtC7B,KAAA,QAAK4B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,eAC7B7B,KAAA,QAAK4B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3B/B,IAAA,OAAA+B,QAAA,CAAKQ,OAAO,CAACC,WAAW,CAAK,CAAC,CAC7B,CAAAjC,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAEa,IAAI,IAAKxB,QAAQ,CAACiC,KAAK,eACnC3B,KAAA,QAAK4B,SAAS,CAAC,cAAc,CAAAC,QAAA,EAAC,WAAS,CAACQ,OAAO,CAACE,MAAM,EAAM,CAC7D,cACDzC,IAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAEjC,eAAe,CAACyC,OAAO,CAACG,SAAS,CAAC,CAAM,CAAC,EACrE,CAAC,cACNxC,KAAA,QAAA6B,QAAA,eACE/B,IAAA,QAAK8B,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAElC,cAAc,CAAC0C,OAAO,CAACI,MAAM,CAAC,CAAM,CAAC,cACtE3C,IAAA,SACE8B,SAAS,iBAAAI,MAAA,CACPK,OAAO,CAACb,MAAM,GAAK/B,aAAa,CAACwC,OAAO,CAAG,gBAAgB,CAAG,iBAAiB,CAC9E,CAAAJ,QAAA,CAEFQ,OAAO,CAACb,MAAM,GAAK/B,aAAa,CAACwC,OAAO,CAAG,SAAS,CAAG,UAAU,CAC9D,CAAC,EACJ,CAAC,EACH,CAAC,EAtBDI,OAAO,CAACjB,EAuBV,CACN,CAAC,CACC,CACN,EACG,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAnB,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}